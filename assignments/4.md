Lab Assignment 4: SQLAlchemy Core
=================================

In this assignment we will start work on the sample project, by creating the database entries for it. You should download [this Python script from GitHub](https://github.com/skiadas/DataWranglingCourse/blob/gh-pages/assignments/assignment4.py) and [this MySQL script from GitHub](https://github.com/skiadas/DataWranglingCourse/blob/gh-pages/assignments/assignment4.sql) and store them both in the same location where your `keys.json` file is. You will need to add a key called `vault` with value an object with keys `username`, `password`, `server` and `schema`. It would look something like this (we won't need the twitter part but you likely have it there already):
```json
{
   "twitter": {
      "key": "....",
      "secret": "...."
   },
   "vault": {
      "username": "skiadas",
      "password": "....",
      "server": "vault.hanover.edu",
      "schema": "skiadas"
   }
}
```
You should use your own login for username and schema name, and type in your own password. Keep the server value at `vault.hanover.edu` as above.

You will be submitting two files. The one is an SQL script you should start. The other is the Python script you just downloaded, with your additions at the end. You should provide two solutions for each question:

- You should first work out the problem in the SQL script, working with MySQLWorkbench and your `assignment4.sql` file.
- Once you have that working, you should transport that solution into a SQLAlchemy solution back in the `assignment4.py` script.

Both scripts start by dropping previous tables, to make sure you have a clean start every time you run them.

The database will contain three tables:

- `ev_users` contains personal user information, such as a user's username, first and last name, and their affiliation or role.
- `ev_events` contains events. An event has an id, a title, some location information, start and end times/days, and an owner's username.
- `ev_participants` pairs events with "participants". Each row contains an event id, a participant's username, and also an entry that represents

Here are the questions.

1. The first step would be to write code that creates these three tables. First create the table `ev_users`. It should have the following columns/fields:
   - `username` which is a variable length character string of length at most 20, it cannot be null and it is the primary key.
   - `first` which is a variable length character string of length at most 40.
   - `last` which is a variable length character string of length at most 40.
   - `affiliation` which is a variable length character string of length at most 40, and should default to the string "None".
   - In SQLAlchemy, store this table in a variable called `tblUsers`.
2. Next, create a table `ev_events` (with corresponding SQLAlchemy name `tblEvents`. It should have the following columns/fields:
   - `id` which should be an auto-incrementing integer, not null and primary key.
   - `title` which is a variable length character string of length at most 40, must be not null, and defaults to the empty string.
   - `longtitude` which is an floating point number with 32 bits of precision.
   - `latitude` which is an floating point number with 32 bits of precision.
   - `owner` which is a variable length character string of length at most 20, it cannot be null, and it is a foreign key pointing to the `username` field of the `ev_users` table.
   - `start` is a `TIMESTAMP` field in MySQL and a `DateTime` type is SQLAlchemy and must default to the value `CURRENT_TIMESTAMP` (which uses the current datetime when the entry is created) in MySQL and the value `datetime.now()` in SQLAlchemy.
   - `end` is a `TIMESTAMP` field in MySQL and a `DateTime` type is SQLAlchemy and must default to null. You will have to enter `NULL DEFAULT NULL` after the `TIMESTAMP` part for MySQL to accept null as a valid timestamp value.
3. Next, create a table `ev_participants` (with corresponding SQLAlchemy name `tblParticipants`). It should have the following columns/fields:
   - `event_id` which is an integer, not null, and a foreign key pointing to the `id` entry in the `ev_events` table, with its "on delete" set to cascade.
   - `username` which is a variable length character string of length at most 20, it cannot be null, and it is a foreign key pointing to the `username` entry of the `ev_users` table, with its "on delete" set to cascade.
   - `status` should be an `ENUM` type, with possible values `"Accepted"`, `"Declined"` and `"Maybe"`. It should be allowed to be null. Read the [MySQL documentation on enum types](https://dev.mysql.com/doc/refman/8.0/en/enum.html) and the [SQLAlchemy documentation on the enum type](https://docs.sqlalchemy.org/en/latest/core/type_basics.html) to find out how to do this. Make sure to understand how Python expects you to enter an enum value (it is not by simply providing a string, you have to create a class that represents the enumeration; The `Status` class has been created for you for this purpose).





a value "one hour from now" (so one hour after the default value for `start`). In order to find out how to do this, you will need to look up the details of the [`DATE_ADD`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-add) function in MySQL, and also the [`timedelta`](https://docs.python.org/3/library/datetime.html#datetime.timedelta) object in the datetime module in Python (Python allows you to add a `timedelta` object to a `datetime` object).
